<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
  <title>FindIt – Settings</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#18181f">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="assets/icons/icon-192.svg">
  <link rel="apple-touch-icon" href="assets/icons/icon-192.svg">
  <link rel="stylesheet" href="styles/main.css">
  <link rel="stylesheet" href="styles/dark.css" id="dark-theme-link">
  <link rel="stylesheet" href="styles/responsive.css">
  <script>
    (function () {
      const theme = localStorage.getItem('findit-theme') || 'auto';
      const darkLink = document.getElementById('dark-theme-link');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const enableDark = theme === 'dark' || (theme === 'auto' && prefersDark);
      if (!enableDark && darkLink) darkLink.disabled = true;

      const lang = localStorage.getItem('findit-lang') || 'en';
      document.documentElement.lang = lang;
      document.documentElement.dir = lang === 'he' ? 'rtl' : 'ltr';
    }());
  </script>
</head>
<body data-page="settings">
  <a href="#main" class="skip-link">Skip to main content</a>

  <header class="app-header" role="banner">
    <div class="header-left">
      <button class="icon-button" id="menu-button" aria-label="Open menu">
        ☰
      </button>
      <h1 id="app-title" data-i18n="app.title">FindIt</h1>
    </div>
    <nav class="header-nav" aria-label="Primary">
      <a href="index.html" class="nav-link" data-i18n="nav.home">Home</a>
      <a href="item.html" class="nav-link" data-i18n="nav.addItem">Add item</a>
      <a href="about.html" class="nav-link" data-i18n="nav.about">About</a>
      <a href="settings.html" class="nav-link nav-link-active" data-i18n="nav.settings">Settings</a>
    </nav>
  </header>

  <main id="main" class="app-main app-main-text" role="main">
    <section class="card" aria-labelledby="settings-heading">
      <h2 id="settings-heading" data-i18n="settings.heading">Settings</h2>

      <div class="settings-group">
        <label for="language-select" class="settings-label" data-i18n="settings.languageLabel">
          Language
        </label>
        <select id="language-select" class="select-input">
          <option value="en" data-i18n="settings.languageEnglish">English</option>
          <option value="he" data-i18n="settings.languageHebrew">עברית (Hebrew)</option>
        </select>
        <p class="settings-help" data-i18n="settings.languageHelp">
          Interface language and layout direction (LTR/RTL) will change immediately.
        </p>
      </div>

      <div class="settings-group">
        <label for="theme-select" class="settings-label" data-i18n="settings.themeLabel">
          Theme
        </label>
        <select id="theme-select" class="select-input">
          <option value="auto" data-i18n="settings.themeAuto">Auto (system)</option>
          <option value="light" data-i18n="settings.themeLight">Light</option>
          <option value="dark" data-i18n="settings.themeDark">Dark</option>
        </select>
        <p class="settings-help" data-i18n="settings.themeHelp">
          Neumorphic design adapts to the selected theme while preserving contrast.
        </p>
      </div>

      <div class="settings-group">
        <label class="settings-label" data-i18n="settings.offlineLabel">
          Offline mode
        </label>
        <p class="settings-help" data-i18n="settings.offlineHelp">
          FindIt automatically caches core files for offline use. Use your browser’s storage settings to clear data.
        </p>
      </div>

      <div class="settings-group">
        <button type="button" id="clear-data-button" class="danger-button" data-i18n="settings.clearData">
          Clear all data
        </button>
        <p class="settings-help" data-i18n="settings.clearDataHelp">
          This will erase your entire catalog from this device. You cannot undo this action.
        </p>
      </div>
    </section>
  </main>

  <footer class="app-footer" role="contentinfo">
    <p class="footer-text">
      <span data-i18n="app.footer">FindIt – local, private catalog stored in your browser.</span>
    </p>
  </footer>

  <div id="image-viewer" class="image-viewer" aria-hidden="true" aria-modal="true" role="dialog">
    <div class="image-viewer-backdrop" id="image-viewer-backdrop"></div>
    <div class="image-viewer-content" role="document">
      <button class="icon-button close-button" id="image-viewer-close" aria-label="Close image viewer">✕</button>
      <img id="image-viewer-img" alt="">
    </div>
  </div>

  <script src="scripts/i18n.js" defer></script>
  <script src="scripts/db.js" defer></script>
  <script src="scripts/gestures.js" defer></script>
  <script src="scripts/ui.js" defer></script>
  <script src="scripts/app.js" defer></script>
  <script src="scripts/sw-register.js" defer></script>
</body>
</html>
