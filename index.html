<!-- findit/index.html -->
<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FindIt</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="img/icon-192.png" />
  <meta name="theme-color" content="#111827" />
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <header class="app-header">
    <a class="brand" href="/" data-i18n="app_name">FindIt</a>

    <div class="controls">
      <button id="themeToggle" class="icon-btn" aria-label="Toggle theme" title="Toggle theme">
        <span class="icon sun" aria-hidden="true">â˜€ï¸</span>
        <span class="icon moon" aria-hidden="true">ğŸŒ™</span>
      </button>

      <select id="langSelect" class="select">
        <option value="en">English</option>
        <option value="he">×¢×‘×¨×™×ª</option>
      </select>

      <button id="installBtn" class="btn" data-i18n="install">Install</button>
    </div>
  </header>

  <nav class="app-nav">
    <button class="tab-btn active" data-tab="catalog" data-i18n="nav_catalog">Catalog</button>
    <button class="tab-btn" data-tab="addEdit" data-i18n="nav_add_edit">Add / Edit</button>
    <button class="tab-btn" data-tab="settings" data-i18n="nav_settings">Settings</button>
    <button class="tab-btn" data-tab="about" data-i18n="nav_about">About</button>
  </nav>

  <main class="app-main">
    <!-- Catalog -->
    <section id="catalog" class="tab active">
      <div class="toolbar">
        <input id="searchInput" class="input" type="search" placeholder="Search..." data-i18n-placeholder="search_placeholder" />
        <button id="exportBtn" class="btn" data-i18n="export">Export</button>
        <label class="file-btn">
          <input id="importInput" type="file" accept=".json" />
          <span data-i18n="import">Import</span>
        </label>
        <button id="resetBtn" class="btn danger" data-i18n="reset_all">Full delete all data</button>
      </div>

      <div id="catalogGrid" class="grid" tabindex="0" aria-label="Catalog grid"></div>

      <div class="empty" id="emptyState" hidden>
        <p data-i18n="empty">No items yet. Add your first one!</p>
      </div>
    </section>

    <!-- Add/Edit -->
    <section id="addEdit" class="tab">
      <form id="itemForm" class="card" autocomplete="off">
        <input type="hidden" id="itemId" />
        <div class="form-row">
          <label for="itemTitle" data-i18n="label_title">Title</label>
          <input id="itemTitle" type="text" class="input" required />
        </div>
        <div class="form-row">
          <label for="itemDesc" data-i18n="label_desc">Description</label>
          <textarea id="itemDesc" class="input"></textarea>
        </div>
        <div class="form-row">
          <label data-i18n="label_image">Image</label>
          <div class="img-inputs">
            <input id="itemImage" type="file" accept="image/*" />
            <input id="itemCamera" type="file" accept="image/*" capture="environment" />
          </div>
          <div id="imagePreview" class="image-preview" aria-label="Image preview"></div>
        </div>
        <div class="form-actions">
          <button type="submit" class="btn primary" data-i18n="save">Save</button>
          <button type="button" id="cancelEdit" class="btn" data-i18n="cancel">Cancel</button>
        </div>
      </form>
    </section>

    <!-- Settings -->
    <section id="settings" class="tab">
      <div class="card">
        <h2 data-i18n="settings_title">Settings</h2>
        <div class="form-row">
          <label data-i18n="settings_theme">Theme</label>
          <button id="settingsTheme" class="btn" data-i18n="toggle_theme">Toggle theme</button>
        </div>
        <div class="form-row">
          <label data-i18n="settings_lang">Language</label>
          <select id="settingsLang" class="select">
            <option value="en">English</option>
            <option value="he">×¢×‘×¨×™×ª</option>
          </select>
        </div>
        <div class="form-row">
          <label data-i18n="settings_storage">Storage</label>
          <button id="settingsExport" class="btn" data-i18n="export">Export</button>
          <label class="file-btn">
            <input id="settingsImport" type="file" accept=".json" />
            <span data-i18n="import">Import</span>
          </label>
          <button id="settingsReset" class="btn danger" data-i18n="reset_all">Full delete all data</button>
        </div>
      </div>
    </section>

    <!-- About -->
    <section id="about" class="tab">
      <div class="card">
        <h2 data-i18n="about_title">About</h2>
        <p data-i18n="about_body">
          FindIt is a simple, privacy-friendly catalog app. Add items with pictures, manage them offline, and export your data anytime.
        </p>
      </div>
    </section>
  </main>

  <!-- Fullscreen image modal -->
  <div id="imageModal" class="modal" aria-hidden="true">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <button id="closeModal" class="icon-btn modal-close" aria-label="Close">âœ•</button>
      <img id="modalImage" src="" alt="Preview" />
    </div>
  </div>

  <footer class="app-footer">
    <small>&copy; <span id="year"></span> <a href="/" class="brand" data-i18n="app_name">FindIt</a></small>
  </footer>

  <script src="js/db.js"></script>
  <script src="js/i18n.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js');
      });
    }
  </script>
</body>
</html>
