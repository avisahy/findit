<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
  <title>FindIt – Item</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#18181f">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="assets/icons/icon-192.svg">
  <link rel="apple-touch-icon" href="assets/icons/icon-192.svg">
  <link rel="stylesheet" href="styles/main.css">
  <link rel="stylesheet" href="styles/dark.css" id="dark-theme-link">
  <link rel="stylesheet" href="styles/responsive.css">
  <script>
    (function () {
      const theme = localStorage.getItem('findit-theme') || 'auto';
      const darkLink = document.getElementById('dark-theme-link');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const enableDark = theme === 'dark' || (theme === 'auto' && prefersDark);
      if (!enableDark && darkLink) darkLink.disabled = true;

      const lang = localStorage.getItem('findit-lang') || 'en';
      document.documentElement.lang = lang;
      document.documentElement.dir = lang === 'he' ? 'rtl' : 'ltr';
    }());
  </script>
</head>
<body data-page="item">
  <a href="#main" class="skip-link">Skip to main content</a>

  <header class="app-header" role="banner">
    <div class="header-left">
      <button class="icon-button" id="menu-button" aria-label="Open menu">
        ☰
      </button>
      <h1 id="app-title" data-i18n="app.title">FindIt</h1>
    </div>
    <nav class="header-nav" aria-label="Primary">
      <a href="index.html" class="nav-link" data-i18n="nav.home">Home</a>
      <a href="item.html" class="nav-link nav-link-active" data-i18n="nav.addItem">Add item</a>
      <a href="about.html" class="nav-link" data-i18n="nav.about">About</a>
      <a href="settings.html" class="nav-link" data-i18n="nav.settings">Settings</a>
    </nav>
  </header>

  <main id="main" class="app-main app-main-text" role="main">
    <section class="card" aria-labelledby="item-form-heading">
      <h2 id="item-form-heading" data-i18n="item.heading">Item details</h2>

      <form id="item-form" novalidate>
        <input type="hidden" id="item-id">

        <div class="form-row">
          <label for="item-title" class="form-label" data-i18n="item.titleLabel">
            Title
          </label>
          <input id="item-title" name="title" class="text-input" type="text" required
                 minlength="1" maxlength="200"
                 autocomplete="off"
                 data-i18n-placeholder="item.titlePlaceholder"
                 placeholder="e.g. Spare keys">
          <p class="form-help" data-i18n="item.titleHelp">
            Use a short, descriptive name so you can quickly find this item.
          </p>
        </div>

        <div class="form-row">
          <label for="item-description" class="form-label" data-i18n="item.descriptionLabel">
            Description
          </label>
          <textarea id="item-description" name="description" class="text-input textarea-input"
                    rows="4" maxlength="2000"
                    data-i18n-placeholder="item.descriptionPlaceholder"
                    placeholder="Where is it, what does it look like, or any details that help you find it again."></textarea>
        </div>

        <div class="form-row">
          <label for="item-tags" class="form-label" data-i18n="item.tagsLabel">
            Tags
          </label>
          <input id="item-tags" name="tags" class="text-input" type="text"
                 data-i18n-placeholder="item.tagsPlaceholder"
                 placeholder="e.g. office, cables, travel">
          <p class="form-help" data-i18n="item.tagsHelp">
            Separate tags with commas. You can filter by tags on the main screen.
          </p>
        </div>

        <div class="form-row">
          <label class="form-label" for="item-image-input" data-i18n="item.imageLabel">
            Image
          </label>
          <div class="image-input-row">
            <input id="item-image-input" type="file" accept="image/*">
            <button type="button" id="clear-image-button" class="secondary-button" data-i18n="item.clearImage">
              Remove image
            </button>
          </div>
          <p class="form-help" data-i18n="item.imageHelp">
            Optional. Images are stored locally. Large images may increase storage usage.
          </p>
          <div id="image-preview-container" class="image-preview-container" hidden>
            <img id="image-preview" alt="" loading="lazy">
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" class="primary-button" id="save-item-button" data-i18n="item.save">
            Save item
          </button>
          <button type="button" class="secondary-button" id="cancel-item-button" data-i18n="item.cancel">
            Cancel
          </button>
          <button type="button" class="danger-button" id="delete-item-button" data-i18n="item.delete" hidden>
            Delete
          </button>
        </div>
      </form>
    </section>
  </main>

  <footer class="app-footer" role="contentinfo">
    <p class="footer-text">
      <span data-i18n="app.footer">FindIt – local, private catalog stored in your browser.</span>
    </p>
  </footer>

  <div id="image-viewer" class="image-viewer" aria-hidden="true" aria-modal="true" role="dialog">
    <div class="image-viewer-backdrop" id="image-viewer-backdrop"></div>
    <div class="image-viewer-content" role="document">
      <button class="icon-button close-button" id="image-viewer-close" aria-label="Close image viewer">✕</button>
      <img id="image-viewer-img" alt="">
    </div>
  </div>

  <script src="scripts/i18n.js" defer></script>
  <script src="scripts/db.js" defer></script>
  <script src="scripts/gestures.js" defer></script>
  <script src="scripts/ui.js" defer></script>
  <script src="scripts/app.js" defer></script>
  <script src="scripts/sw-register.js" defer></script>
</body>
</html>
